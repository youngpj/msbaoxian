<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?6698cfd80278a8d70801a172be09e4f8";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
      
    <script>
      
      var oauthLink = location.href.indexOf('activity.minshenglife') > -1 ?  'http://www.msjk95596.com/act/wechat/base/access_token/?state=' : 'http://test.msjk95596.com/act/wechat/base/access_token/?state=';
      if (!parseUrl('oid')) {
        // if(!parseUrl('source')||!parseUrl('agentId')){
        //   var url = encodeURIComponent(location.href)
        // }
        console.log(location.href)
        location.href = oauthLink+encodeURIComponent(location.href);

      }

      var agentIdVal =  !!parseUrl('agentId')?parseUrl('agentId'):""
      localStorage.setItem("AGENTID",agentIdVal)


      // 用于页面跳转 
      var redirectPath = parseUrl('redirect_path');
      if (redirectPath) {
        var url = deleteUrlQuery('redirect_path');
        window.location.href = url + '#/' + redirectPath;
      }
  
      function parseUrl(queryKey) {
        var search = location.search;
  
        if (search.length > 0 && search.indexOf('?') > -1) {
          search = search.substring(1);
          var cArr = search.split('&');
  
          for (var i = 0, len = cArr.length; i < len; i++) {
            var item = cArr[i],
              key = cArr[i].split('=')[0],
              val = cArr[i].split('=')[1];
  
            if (key === queryKey) {
              return val;
            }
          }
        }
  
        return null;
      }
  
      function deleteUrlQuery(queryKey) {
        var search = location.search;
        var resSearch = '';
        var queryArr = [].concat(queryKey);
  
        if (search.length > 0 && search.indexOf('?') > -1) {
          search = search.substring(1);
          var cArr = search.split('&');
  
          for (var i = 0, len = cArr.length; i < len; i++) {
            var item = cArr[i],
              key = cArr[i].split('=')[0],
              val = cArr[i].split('=')[1];
  
            if (queryArr.indexOf(key) === -1) {
              if (resSearch.length == 0) {
                resSearch += '?' + key + '=' + val;
              } else {
                resSearch += '&' + key + '=' + val;
              }
            }
          }
        }
  
        return location.origin + location.pathname + resSearch;
      }
      window.env = 'prod';

      var fixSafari = function() {
        setTimeout(function() {
          var rootFontSize = parseFloat(document.getElementsByTagName('html')[0].style.fontSize);

          if (rootFontSize * 10 !== window.screen.width) {
            document.getElementsByTagName('html')[0].style.fontSize = window.screen.width / 10 + 'px';
          }
        })
      }
    </script>
    
    <script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
    <title>老司机随e保</title>
  </head>
  <body onpageshow="fixSafari(event)">
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>
